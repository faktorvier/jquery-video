/*! FAKTOR VIER Video Controller v0.1.0.0 | (c) 2015 FAKTOR VIER GmbH | http://faktorvier.ch */
function onYouTubeIframeAPIReady(){if("undefined"!=typeof $.video)for(callback_index in $.video.global.youtube_api_ready_callbacks)$.video.global.youtube_api_ready_callbacks[callback_index]()}var video_postmessage_event_func="attachEvent",video_postmessage_event="onmessage";window.addEventListener&&(video_postmessage_event_func="addEventListener",video_postmessage_event="message");
window[video_postmessage_event_func](video_postmessage_event,function(c){var a=c.origin,b=JSON.parse(c.data);c="undefined"==typeof b.event?null:b.event;if(!/^https?:\/\/player.vimeo.com/.test(a))return!1;a=$("#"+b.player_id);b=a.getVideoConfig();null==b&&(a.initVideo(),b=a.getVideoConfig());switch(c){case "ready":$.video.vimeo_postmessage(a,"addEventListener","play");$.video.vimeo_postmessage(a,"addEventListener","pause");$.video.vimeo_postmessage(a,"addEventListener","finish");a.data("video-player",
a);a.attr(b.attr_ready,"");a.trigger("ready"+$.video.global.event_suffix);break;case "play":a.removeAttr(b.attr_paused);a.attr(b.attr_playing,"");a.trigger("play"+$.video.global.event_suffix);break;case "pause":a.removeAttr(b.attr_playing);a.attr(b.attr_paused,"");a.trigger("pause"+$.video.global.event_suffix);break;case "finish":a.removeAttr(b.attr_playing),a.removeAttr(b.attr_paused),a.trigger("finish"+$.video.global.event_suffix)}},!1);
(function($){$.video={global:{event_suffix:"_video",youtube_api_ready_callbacks:[],youtube_iframe_api:"https://www.youtube.com/iframe_api"},config:{attr_ready:"data-video-ready",attr_playing:"data-video-playing",attr_paused:"data-video-paused"}};
var youtube_player_action=function(b,a){var c=b.data("video").config;if("undefined"==typeof b.data("video-player")){var d=function(){var d=new YT.Player(b[0],{events:{onReady:function(d){b.attr(c.attr_ready,"");a(d.target)},onStateChange:function(a){switch(a.data){case 0:b.removeAttr(c.attr_paused);b.removeAttr(c.attr_playing);b.trigger("finish"+$.video.global.event_suffix);break;case 1:b.removeAttr(c.attr_paused);b.attr(c.attr_playing,"");b.trigger("play"+$.video.global.event_suffix);break;case 2:b.removeAttr(c.attr_playing),
b.attr(c.attr_paused,""),b.trigger("pause"+$.video.global.event_suffix)}}}});b.data("video-player",d)};"undefined"==typeof YT||"undefined"==typeof YT.Player?($.video.global.youtube_api_ready_callbacks.push(function(){d()}),0==$('script[src="https://www.youtube.com/iframe_api"]').length&&0==$('script[src="http://www.youtube.com/iframe_api"]').length&&$("<script>\x3c/script>").attr("src",$.video.global.youtube_iframe_api).insertBefore($("script").first())):d()}else a(b.data("video-player"))},vimeo_player_action=
function(b,a){"undefined"!=typeof b.data("video-player")&&a(b.data("video-player"))};$.video.vimeo_postmessage=function(b,a,c){a={method:a};c&&(a.value=c);"undefined"!=typeof b[0]&&b[0].contentWindow.postMessage(JSON.stringify(a),"*")};$.fn.getVideoConfig=function(){var b=$(this).first();return"undefined"!=typeof b.data("video")?b.data("video").config:null};$.fn.getVideoPlayer=function(){var b=$(this).first();return"undefined"!=typeof b.data("video-player")?b.data("video-player"):null};
$.fn.getVideoType=function(){var b=$(this).first();return video_type="video"==b.prop("tagName").toLowerCase()?"video":-1!==b.attr("src").indexOf("youtube.com/embed")?"youtube":-1!==b.attr("src").indexOf("player.vimeo.com/video")?"vimeo":"undefined"};
$.fn.initVideo=function(b){return this.each(function(){var a=$(this),c=a.getVideoType(),d=a.getVideoConfig();if(null==d)d=$.extend($.extend({},$.video.config),b),a.data("video",{config:d});else return console.warn("Player already initialized!"),!1;if("youtube"==c)-1==a.attr("src").indexOf("enablejsapi=true")&&-1==a.attr("src").indexOf("enablejsapi=1")&&(-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?enablejsapi=1"):a.attr("src",a.attr("src")+"&enablejsapi=1"));else if("vimeo"==c&&(-1==
a.attr("src").indexOf("api=true")&&-1==a.attr("src").indexOf("api=1")&&(-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?api=1"):a.attr("src",a.attr("src")+"&api=1")),-1==a.attr("src").indexOf("player_id="))){var e=a.attr("id");"undefined"==typeof e&&(e="video-"+Math.round((new Date).getTime()+100*Math.random()),a.attr("id",e));-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?player_id="+e):a.attr("src",a.attr("src")+"&player_id="+e)}"video"==c?(a.attr(d.attr_ready,""),a.trigger("ready"+
$.video.global.event_suffix),a.bind("play",function(){a.removeAttr(d.attr_paused);a.attr(d.attr_playing,"");a.trigger("play"+$.video.global.event_suffix)}),a.bind("pause",function(){a.removeAttr(d.attr_playing);a.attr(d.attr_paused,"");a.trigger("pause"+$.video.global.event_suffix)}),a.bind("ended",function(){a.removeAttr(d.attr_playing);a.removeAttr(d.attr_paused);a.trigger("finish"+$.video.global.event_suffix)}),a.data("video-player",a[0])):"youtube"==c?youtube_player_action(a,function(b){a.trigger("ready"+
$.video.global.event_suffix)}):"vimeo"==c&&vimeo_player_action(a,function(b){a.trigger("ready"+$.video.global.event_suffix)})})};$.fn.playVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?c.play():"youtube"==a?youtube_player_action(b,function(a){a.playVideo()}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"play")})})};
$.fn.pauseVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?c.pause():"youtube"==a?youtube_player_action(b,function(a){a.pauseVideo()}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"pause")})})};
$.fn.stopVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?(c.pause(),c.currentTime=0):"youtube"==a?youtube_player_action(b,function(a){a.seekTo(a.getDuration())}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"unload")})})};
$.fn.restartVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();b.getVideoConfig();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?(c.currentTime=0,c.play()):"youtube"==a?youtube_player_action(b,function(a){a.seekTo(0);a.playVideo();b.trigger("restart"+$.video.global.event_suffix)}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"seekTo","0");$.video.vimeo_postmessage(a,"play");b.trigger("restart"+$.video.global.event_suffix)})})};
$.fn.muteVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?c.muted=!0:"youtube"==a?youtube_player_action(b,function(a){a.mute()}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"setVolume","0")})})};
$.fn.unmuteVideo=function(){return this.each(function(){var b=$(this),a=b.getVideoType(),c=b.getVideoPlayer();if(null==c)return console.warn("Player not initialized!"),!1;"video"==a?c.muted=!1:"youtube"==a?youtube_player_action(b,function(a){a.unMute()}):"vimeo"==a&&vimeo_player_action(b,function(a){$.video.vimeo_postmessage(a,"setVolume",1)})})};
$.fn.seekToVideo=function(b){return this.each(function(){var a=$(this),c=a.getVideoType(),d=a.getVideoPlayer();if(null==d)return console.warn("Player not initialized!"),!1;"video"==c?d.currentTime=b:"youtube"==c?youtube_player_action(a,function(a){a.seekTo(b)}):"vimeo"==c&&vimeo_player_action(a,function(a){$.video.vimeo_postmessage(a,"seekTo",b)})})};
$.fn.destroyVideo=function(){return this.each(function(){var b=$(this);b.getVideoType();b.getVideoPlayer();var a=b.getVideoConfig();null!=a&&(b.removeData("video"),b.removeData("video-player"),b.removeAttr(a.attr_ready),b.removeAttr(a.attr_playing),b.removeAttr(a.attr_paused),b.trigger("destroy"+$.video.global.event_suffix))})};
$.fn.addVideoEvent=function(b,a){return this.each(function(){var c=$(this),d=c.getVideoType(),e=c.getVideoPlayer();c.bind(b+$.video.global.event_suffix,function(b){a(b,c,d,e)})})};$.fn.removeVideoEvent=function(b){return this.each(function(){$(this).unbind(b+$.video.global.event_suffix)})};
$.fn.video=function(b,a){var c="init",d={};"string"==typeof b?(c=b,d=a):d=b;return this.each(function(){var a=$(this);switch(c){case "init":a.initVideo(d);break;case "play":a.playVideo();break;case "pause":a.pauseVideo();break;case "stop":a.stopVideo();break;case "restart":a.restartVideo();break;case "mute":a.muteVideo();break;case "unmute":a.unmuteVideo();break;case "seekTo":a.seekToVideo(d);break;case "destroy":a.destroyVideo();break;case "addEvent":a.addVideoEvent(d[0],d[1]);break;case "removeEvent":a.addVideoEvent(d[0]);
break;default:console.warn('Video action "'+c+'" not found')}})};}(jQuery));