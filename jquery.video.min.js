/*! FAKTOR VIER Video Controller v0.1.4 | (c) 2023 FAKTOR VIER GmbH | http://faktorvier.ch */
function onYouTubeIframeAPIReady(){if("undefined"!=typeof $.video)for(callback_index in $.video.global.youtube_api_ready_callbacks)$.video.global.youtube_api_ready_callbacks[callback_index]()}var video_postmessage_event_func="attachEvent",video_postmessage_event="onmessage";window.addEventListener&&(video_postmessage_event_func="addEventListener",video_postmessage_event="message");
window[video_postmessage_event_func](video_postmessage_event,function(c){if(!/^https?:\/\/player.vimeo.com/.test(c.origin))return!1;var f=JSON.parse(c.data);c="undefined"==typeof f.event?null:f.event;f=$("#"+f.player_id);var h=f.getVideoConfig();null==h&&(f.initVideo(),h=f.getVideoConfig());if(null!=h)switch(c){case "ready":$.video.vimeo_postmessage(f,"addEventListener","play");$.video.vimeo_postmessage(f,"addEventListener","pause");$.video.vimeo_postmessage(f,"addEventListener","finish");f.data("video-player",
f);f.attr(h.attr_ready,"");f.trigger("ready"+$.video.global.event_suffix);break;case "play":f.removeAttr(h.attr_paused);f.attr(h.attr_playing,"");f.trigger("play"+$.video.global.event_suffix);break;case "pause":f.removeAttr(h.attr_playing);f.attr(h.attr_paused,"");f.trigger("pause"+$.video.global.event_suffix);break;case "finish":f.removeAttr(h.attr_playing),f.removeAttr(h.attr_paused),f.trigger("finish"+$.video.global.event_suffix)}},!1);
(function(c){c.video={global:{event_suffix:"_video",youtube_api_ready_callbacks:[],youtube_iframe_api:"https://www.youtube.com/iframe_api"},config:{attr_ready:"data-video-ready",attr_playing:"data-video-playing",attr_paused:"data-video-paused"}};var f=function(b,a){var e=b.data("video").config;if("undefined"==typeof b.data("video-player")){var d=function(){var g=new YT.Player(b[0],{events:{onReady:function(k){b.attr(e.attr_ready,"");a(k.target)},onStateChange:function(k){switch(k.data){case 0:b.removeAttr(e.attr_paused);
b.removeAttr(e.attr_playing);b.trigger("finish"+c.video.global.event_suffix);break;case 1:b.removeAttr(e.attr_paused);b.attr(e.attr_playing,"");b.trigger("play"+c.video.global.event_suffix);break;case 2:b.removeAttr(e.attr_playing),b.attr(e.attr_paused,""),b.trigger("pause"+c.video.global.event_suffix)}}}});b.data("video-player",g)};"undefined"==typeof YT||"undefined"==typeof YT.Player?(c.video.global.youtube_api_ready_callbacks.push(function(){d()}),0==c('script[src="https://www.youtube.com/iframe_api"]').length&&
0==c('script[src="http://www.youtube.com/iframe_api"]').length&&c("<script>\x3c/script>").attr("src",c.video.global.youtube_iframe_api).insertBefore(c("script").first())):d()}else a(b.data("video-player"))},h=function(b,a){"undefined"!=typeof b.data("video-player")&&a(b.data("video-player"))};c.video.vimeo_postmessage=function(b,a,e){a={method:a};e&&(a.value=e);"undefined"!=typeof b[0]&&b[0].contentWindow.postMessage(JSON.stringify(a),"*")};c.fn.getVideoConfig=function(){var b=c(this).first();return"undefined"!=
typeof b.data("video")?b.data("video").config:null};c.fn.getVideoPlayer=function(){var b=c(this).first();return"undefined"!=typeof b.data("video-player")?b.data("video-player"):null};c.fn.getVideoType=function(){var b=c(this).first();return video_type="video"==b.prop("tagName").toLowerCase()?"video":-1!==b.attr("src").indexOf("youtube.com/embed")?"youtube":-1!==b.attr("src").indexOf("player.vimeo.com/video")?"vimeo":"undefined"};c.fn.initVideo=function(b){return this.each(function(){var a=c(this),
e=a.getVideoType(),d=a.getVideoConfig();if(null==d)d=c.extend(c.extend({},c.video.config),b),a.data("video",{config:d});else return console.warn("Player already initialized!"),!1;if("youtube"==e)-1==a.attr("src").indexOf("enablejsapi=true")&&-1==a.attr("src").indexOf("enablejsapi=1")&&(-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?enablejsapi=1"):a.attr("src",a.attr("src")+"&enablejsapi=1"));else if("vimeo"==e&&(-1==a.attr("src").indexOf("api=true")&&-1==a.attr("src").indexOf("api=1")&&
(-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?api=1"):a.attr("src",a.attr("src")+"&api=1")),-1==a.attr("src").indexOf("player_id="))){var g=a.attr("id");"undefined"==typeof g&&(g="video-"+Math.round((new Date).getTime()+100*Math.random()),a.attr("id",g));-1==a.attr("src").indexOf("?")?a.attr("src",a.attr("src")+"?player_id="+g):a.attr("src",a.attr("src")+"&player_id="+g)}"video"==e?(4==a.get(0).readyState?(a.attr(d.attr_ready,""),a.trigger("ready"+c.video.global.event_suffix)):a.get(0).addEventListener("canplaythrough",
function(){a.attr(d.attr_ready,"");a.trigger("ready"+c.video.global.event_suffix);a.get(0).removeEventListener("canplaythrough",this)},!1),a.bind("play",function(){a.removeAttr(d.attr_paused);a.attr(d.attr_playing,"");a.trigger("play"+c.video.global.event_suffix)}),a.bind("pause",function(){a.removeAttr(d.attr_playing);a.attr(d.attr_paused,"");a.trigger("pause"+c.video.global.event_suffix)}),a.bind("ended",function(){a.removeAttr(d.attr_playing);a.removeAttr(d.attr_paused);a.trigger("finish"+c.video.global.event_suffix)}),
a.data("video-player",a[0])):"youtube"==e?f(a,function(k){a.trigger("ready"+c.video.global.event_suffix)}):"vimeo"==e&&h(a,function(k){a.trigger("ready"+c.video.global.event_suffix)})})};c.fn.playVideo=function(){return this.each(function(){var b=c(this),a=b.getVideoType(),e=b.getVideoPlayer();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?e.play():"youtube"==a?f(b,function(d){d.playVideo()}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,"play")})})};c.fn.pauseVideo=
function(){return this.each(function(){var b=c(this),a=b.getVideoType(),e=b.getVideoPlayer();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?e.pause():"youtube"==a?f(b,function(d){d.pauseVideo()}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,"pause")})})};c.fn.stopVideo=function(){return this.each(function(){var b=c(this),a=b.getVideoType(),e=b.getVideoPlayer();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?(e.pause(),e.currentTime=0):"youtube"==
a?f(b,function(d){d.seekTo(d.getDuration())}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,"unload")})})};c.fn.restartVideo=function(){return this.each(function(){var b=c(this),a=b.getVideoType(),e=b.getVideoPlayer();b.getVideoConfig();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?(e.currentTime=0,e.play()):"youtube"==a?f(b,function(d){d.seekTo(0);d.playVideo();b.trigger("restart"+c.video.global.event_suffix)}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,
"seekTo","0");c.video.vimeo_postmessage(d,"play");b.trigger("restart"+c.video.global.event_suffix)})})};c.fn.muteVideo=function(){return this.each(function(){var b=c(this),a=b.getVideoType(),e=b.getVideoPlayer();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?e.muted=!0:"youtube"==a?f(b,function(d){d.mute()}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,"setVolume","0")})})};c.fn.unmuteVideo=function(){return this.each(function(){var b=c(this),a=b.getVideoType(),
e=b.getVideoPlayer();if(null==e)return console.warn("Player not initialized!"),!1;"video"==a?e.muted=!1:"youtube"==a?f(b,function(d){d.unMute()}):"vimeo"==a&&h(b,function(d){c.video.vimeo_postmessage(d,"setVolume",1)})})};c.fn.seekToVideo=function(b){return this.each(function(){var a=c(this),e=a.getVideoType(),d=a.getVideoPlayer();if(null==d)return console.warn("Player not initialized!"),!1;"video"==e?d.currentTime=b:"youtube"==e?f(a,function(g){g.seekTo(b)}):"vimeo"==e&&h(a,function(g){c.video.vimeo_postmessage(g,
"seekTo",b)})})};c.fn.destroyVideo=function(){return this.each(function(){var b=c(this);b.getVideoType();b.getVideoPlayer();var a=b.getVideoConfig();null!=a&&(b.removeData("video"),b.removeData("video-player"),b.removeAttr(a.attr_ready),b.removeAttr(a.attr_playing),b.removeAttr(a.attr_paused),b.trigger("destroy"+c.video.global.event_suffix))})};c.fn.addVideoEvent=function(b,a){return this.each(function(){var e=c(this),d=e.getVideoType(),g=e.getVideoPlayer();"play"!=b||"video"!=d||"undefined"==typeof e.get(0).paused||
e.get(0).paused||a(null,e,d,g);e.bind(b+c.video.global.event_suffix,function(k){a(k,e,d,g)})})};c.fn.removeVideoEvent=function(b){return this.each(function(){c(this).unbind(b+c.video.global.event_suffix)})};c.fn.video=function(b,a){var e="init",d={};"string"==typeof b?(e=b,d=a):d=b;return this.each(function(){var g=c(this);switch(e){case "init":g.initVideo(d);break;case "play":g.playVideo();break;case "pause":g.pauseVideo();break;case "stop":g.stopVideo();break;case "restart":g.restartVideo();break;
case "mute":g.muteVideo();break;case "unmute":g.unmuteVideo();break;case "seekTo":g.seekToVideo(d);break;case "destroy":g.destroyVideo();break;case "addEvent":g.addVideoEvent(d[0],d[1]);break;case "removeEvent":g.removeVideoEvent(d[0]);break;default:console.warn('Video action "'+e+'" not found')}})}})(jQuery);